# 스프링부트 로컬 서버 패키징 실험

## 1. 프로젝트 개요

회사나 집에 남는 컴퓨터 한 대를 **서버 컴퓨터처럼 활용**한다는 가정 하에,  
스프링부트 애플리케이션을

- 클라우드 비용 없이(무료),
- 자바 설치 없이,
- Mac/Linux에서 **더블클릭으로 실행할 수 있는 형태**

로 배포하는 방법을 실험한 프로젝트입니다.

## 2. 실행 환경

- Java 17
- Gradle
- 대상 OS
    - macOS

---

## 3. 기능 명세

### 3-1. 서버 기본 기능

| ID | 기능명 | 내용 |
|----|--------|------|
| F-API-001 | 헬스 체크 API | `GET /health` 요청 시 서버가 정상 동작 중인지 `200 OK` 와 간단한 메시지로 응답 |
| F-API-002 | 서버 정보 조회 API | `GET /info` 요청 시 애플리케이션 버전, 빌드 시각, 실행 중인 OS 정보 등을 JSON 으로 응답 |
| F-API-003 | 에코 API | `POST /echo` 요청 바디(JSON 또는 문자열)를 그대로 응답하여 테스트용으로 사용 가능 |

### 3-2. 설정/환경 관련 기능

| ID | 기능명 | 내용 |
|----|--------|------|
| F-CONFIG-001 | 포트 설정 | `application.yml` 또는 별도의 설정 파일에서 `server.port` 를 읽어 서버 포트를 설정 |
| F-CONFIG-002 | 기본 설정 자동 적용 | 설정 파일이 존재하지 않거나 필수 값이 비어있는 경우, 기본 포트(예: 8080 또는 9001)로 서버를 기동하고 콘솔에 경고 메시지 출력 |
| F-CONFIG-003 | 실행 환경 정보 노출 | `/info` 응답에 실행 중인 자바 버전, OS, 실행 경로 등의 정보를 포함 |

### 3-3. 실행 스크립트 및 패키징 기능

| ID | 기능명 | 내용 |
|----|--------|------|
| F-RUN-001 | Mac 더블클릭 실행 스크립트 | `run-mac.command` 를 더블클릭하면 터미널이 자동으로 열리고 스프링부트 서버가 실행됨 |
| F-RUN-002 | Linux 실행 스크립트 | `run-linux.sh` 를 쉘에서 실행하면 스프링부트 서버가 실행됨 |
| F-RUN-003 | 경로 안정성 확보 | 실행 스크립트가 어느 위치에서 실행되더라도, 스크립트 기준 상대 경로를 사용해 `app.jar` 를 찾도록 구현 |
| F-RUN-004 | JRE 번들 실행 (선택 구현) | 배포 디렉터리에 JRE를 포함하고, 시스템에 Java가 설치되어 있지 않아도 실행 가능하도록 옵션 형태로 지원 |

### 3-4. 포트 및 예외 처리 기능

| ID | 기능명 | 내용 |
|----|--------|------|
| F-PORT-001 | 포트 사용 여부 체크 (Mac) | `run-mac.command` 실행 시 `lsof` 등을 사용해 설정된 포트가 이미 사용 중인지 확인 |
| F-PORT-002 | 포트 충돌 처리 | 포트가 사용 중이면 서버 기동을 중단하고, 어떤 포트가 이미 사용 중인지 콘솔에 명시적으로 출력 |
| F-PORT-003 | 에러 메시지 가독성 | 실행 실패 시 사용자 기준으로 이해하기 쉬운 에러 메시지를 출력 (예: "9001 포트가 이미 사용 중입니다. 설정 파일에서 포트를 변경하거나 기존 프로세스를 종료해 주세요.") |

---

## 4. 디렉터리 구조 (초기 설계)

```text
/project-root
 ├── app/
 │    └── build/libs/app.jar           # 스프링부트 빌드 결과물(fat jar)
 │
 ├── config/
 │    └── application.yml              # 서버 포트, 로그레벨 등 설정
 │
 ├── run-mac.command                    # Mac용 더블클릭 실행 스크립트
 ├── run-linux.sh                       # Linux용 실행 스크립트
 │
 ├── jre/                               # (선택) 번들링된 JRE 디렉터리
 │
 └── README.md
